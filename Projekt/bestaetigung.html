<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bestellbestätigung</title>
    <link rel="stylesheet" href="styles.css">
    <script src="produkt.js" defer></script>
    <script src="katalog.js" defer></script>
    <script src="befuellen.js" defer></script>
</head>

<body>
    <header>
        <h1>Bestellbestätigung</h1>
    </header>

    <main>
        <div id="bestellungsDetails"></div>
        <h2>Kundendaten</h2>
        <div id="kundendaten"></div>
    </main>

    <footer>
        <p>&copy; 2024 Webshop</p>
    </footer>

    <script>
        function ladeBestellungsDetails() {
            const ausgewählteProduktNummern = JSON.parse(localStorage.getItem('ausgewählteProdukte'));
            const katalog = katalogBefuellen();
            const bestellungsDetails = document.getElementById('bestellungsDetails');
            bestellungsDetails.innerHTML = '';

            ausgewählteProduktNummern.forEach(produktNummer => {
                const produkt = katalog.produkte.find(p => p.produktNummer == produktNummer);
                if (produkt) {
                    bestellungsDetails.innerHTML += produkt.kurzansicht();
                }
            });

            const kundendaten = JSON.parse(localStorage.getItem('kundendaten'));
            const kundendatenElement = document.getElementById('kundendaten');
            kundendatenElement.innerHTML = `<h2>Bestellung erfolgreich!</h2>
                                              <div>${produkt.kurzansicht()}</div>
                                              <div>
                                                  <h3>Kontaktdaten:</h3>
                                                  <p> Sehr geehrter Herr ${kontaktdaten.nachname}, wir versenden Ihre Bestellung schnellstmöglich an folgende Adresse: <br>
                                                    ${kontaktdaten.name} ${kontaktdaten.nachname}, ${kontaktdaten.plz} ${kontaktdaten.ort} - ${kontaktdaten.strasse} </p>
                                             
                                                  <p>Ihre angegebene E-Mail: ${kontaktdaten.email}</p>
                                              </div>`;
        }

        window.onload = ladeBestellungsDetails;
    </script>
</body>

</html>